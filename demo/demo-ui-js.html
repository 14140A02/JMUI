<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>JMUI Demo</title>
    <link rel="stylesheet" href="../css/jmui.css">

    <script src="../lib/zeptojs/zepto.min.js"></script>
    <script src="../js/jmui.js"></script>
</head>
<body class="jmu-app">
<div class="jmu-header">
    JMUI-DEMO
</div>
<div class="jmu-footer">
</div>
<div class="jmu-content-container">

		<div class="jmu-content jmu-active">
			<section id="loading">
				<div class="demo-item">
					<p class="demo-desc">加载中</p>
					<div class="demo-block">
						<a id="loading-page" class="demo-show jmu-btn-lg">page</a>
						<a id="loading-text" class="demo-show jmu-btn-lg">text</a>
						<a id="loading-rich" class="demo-show jmu-btn-lg">rich</a>
					</div>
					<script class="demo-script">
						;(function (){
							// 第一种，页面中间出现菊花提示
							// 测试
							$('#loading').on('tap', '#loading-page', function (){
								$('body').textLoading('hide');
								$('body').richLoading('hide');
								$('body').pageLoading('show');
							});

							// 第二种，页面中间出现文字提示
							var opts1 = {
								preventScroll: true, // 是否禁止滚动
								content: '拼命加载中...'
							};
							// 测试
							$('#loading').on('tap', '#loading-text', function (){
								$('body').richLoading('hide');
								$('body').pageLoading('hide');
								$('body').textLoading('show', opts1);
							});

							// 第三种，页面中间出现文字提示，含关闭按钮
							var opts2 = {
								preventScroll: true,
								content: '我也在拼命加载中...',
								onClose: function (){console.log('哎呀, 我被关闭了,心好痛!')}
							};
							// 测试
							$('#loading').on('tap', '#loading-rich', function (){
								$('body').textLoading('hide');
								$('body').pageLoading('hide');
								$('body').richLoading('show', opts1);
							});
						})();
					</script>
				</div>
			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="tab">
				<div class="demo-item">
					<p class="demo-desc">标签栏</p>
					<div class="demo-block">
						<div id="tab-demo">
							<ul class="jmu-tab">
								<li class="item jmu-active">tab1</li>
								<li class="item">tab2</li>
							</ul>
							<ul class="tab-content">
								<li class="panel-1">
									<p>我是 tab1 中的内容</p>
									<p>我是 tab1 中的内容</p>
									<p>我是 tab1 中的内容</p>
								</li>
								<li class="panel-2" style="display: none;">
									<p>我是 tab2 中的内容</p>
									<p>我是 tab2 中的内容</p>
									<p>我是 tab2 中的内容</p>
								</li>
							</ul>
						</div>
					</div>
					<script class="demo-script">
						;(function (){
							var opts = {
								$el: '.jmu-tab', 						  // 指定 tab 栏标题容器
								relateSelector: ['.panel-1', '.panel-2'], // 指定关联内容
								onSwitchTab: function(index, item){
									// 切换时的回调函数
									console.log('已切换到第 %s 个 tab', index);
								}
							};
							$('#tab-demo').tab(opts).show();
						})();
					</script>
				</div>
			</section>	
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="toast">
				<div class="demo-item">
					<p class="demo-desc">提示条</p>
					<div class="demo-block">
						<a class="demo-show jmu-btn-lg" data-type="tips">普通信息</a>
						<a class="demo-show jmu-btn-lg" data-type="success">成功信息</a>
						<a class="demo-show jmu-btn-lg" data-type="warning">警告信息</a>
					</div>
					<script class="demo-script">
						;(function (){
							var opts = {
								// 必填项
								state: 'warning',   // 三种状态 warning, tips, success
								content: '我是提示内容',

								// 可选项, 以下为默认值
								animation: true, 	// 是否开启动画, 默认为 true
								preventScroll: true,// 是否禁止滚动, 默认为 true
								duration: 2000		// 指定自动关闭的时间, 单位为 ms, 默认未 2000ms
							};
							// 测试
							var toast = new JMU.Toast();
							$('#toast').on('tap', '.demo-show', function (){
								opts.state = $(this).data('type');
								toast.show(opts);
							});
						})();
					</script>
				</div>
			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="progress">
				<div class="demo-item">
					<p class="demo-desc">进度条 - 传输文件</p>
					<div class="demo-block">
						<div id="progress-demo-1">
							<div class="jmu-progress-file jmu-clearfix">
								<div class="progress-info">
									<span class="progress-text">下载中...</span>
									(<span class="progress-size-curr">0</span>M/<span class="progress-size-total">0</span>M)

									<p class="progress-bar-wrap">
										<span class="progress-bar"></span>
									</p>
								</div>
								<div class="progress-action jmu-horizental-center jmu-vertical-center">
									<button class="action-cancle">取消</button>
								</div>
							</div>
						</div>
					</div>
					<script class="demo-script">
						;(function (){
							// 图片或壁纸上传进度条
							var progress1 = $('#progress-demo-1').progress({
								$el: '.jmu-progress-file', // 指定条容器
								percentage: 20, 		  // 初始化当前进度
								total: 1.03    			  // 初始化文件大小
							});
							// 模拟收到后台新进度, 更新当前进度条的百分比
							var timer = setInterval(function () {
								var newPercentage1 = progress1.options.percentage + 1;
								if (newPercentage1 > 100) {
									newPercentage1 = ~~Math.random() * 20;
								}
								progress1.changeProgress(newPercentage1);
							}, 500);
							$('.action-cancle').on('tap', function () {
								clearInterval(timer);
							})
						})();
					</script>
				</div>

				<div class="demo-item">
					<p class="demo-desc">进度条 - 图片上传</p>
					<div class="demo-block">
						<div id="progress-demo-2">
							<div class="jmu-progress-img jmu-horizental-center jmu-vertical-center">
								<span class="progress-number">20</span>
								<div class="progress-mask"></div>
							</div>
						</div>
					</div>
					<script class="demo-script">
						;(function (){
							var progress2 = $('#progress-demo-2').progress({
								$el: '.jmu-progress-img',
								percentage: 0,
								total: 9.03
							});
							setInterval(function () {
								var newPercentage2 = progress2.options.percentage + 1;
								if (newPercentage2 > 100) {
									newPercentage1 = ~~Math.random() * 20;
								}
								progress2.changeProgress(newPercentage2);
							}, 500);
						})();
					</script>
				</div>

				<div class="demo-item">
					<p class="demo-desc">进度条 - 圆环加载</p>
					<div class="demo-block">
						<div id="progress-demo-3">
							<div class="jmu-progress-circle jmu-center">
								<div class="jmu-progress-pie">
									<div class="jmu-progress-pie-left">
										<div class="jmu-progress-left"></div>
									</div>
									<div class="jmu-progress-pie-right">
										<div class="jmu-progress-right"></div>
									</div>
									<div class="jmu-progress-mask jmu-horizental-center jmu-vertical-center">
										<span class="progress-number">30</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<script class="demo-script">
						;(function (){
							var progress3 = $('#progress-demo-3').progress({
								$el: '.jmu-progress-circle',
								percentage: 30,
								total: 78
							});
							// 测试
							setInterval(function () {
								var newPercentage3 = progress3.options.percentage + 1;
								if (newPercentage3 > 100) {
									newPercentage1 = ~~Math.random() * 20;
								}
								progress3.changeProgress(newPercentage3);
							}, 500);
						})();
					</script>
				</div>
			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="range">
				<div class="demo-item">
					<p class="demo-desc">范围条</p>
					<div class="demo-block">
						<div id="range-demo">
							<div class="jmu-form-item jmu-form-item-range jmu-border">
								<label class="jmu-range">
									<input type="range" min="1" max="100" step="1" value="50">
									<span class="jmu-range-val">50</span>
								</label>
							</div>
						</div>
					</div>
					<script src="../lib/zeptojs/zepto.min.js"></script>
					<script src="../js/jmui.js"></script>
					<script class="demo-script">
						;(function (){
							// 图片或壁纸上传进度条
							var range = $('#range-demo').range({
								$el: '.jmu-range',
								min: 0, 	 // 最小
								max: 100,    // 最大
								step: 1, 	 // 步长
								value: 50,   // 默认值
								onInput: function (){
									console.log('range value is changing.');
								},
								onChange: function () {
									var self = this;
									console.log('range value is changing to: ' + self.value);
								}
							});
						})();
					</script>
				</div>
			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="dialog">
				<div class="demo-item">
					<p class="demo-desc">对话框</p>
					<div class="demo-block">
						<!--无 html-->
					</div>
					<a class="demo-show jmu-btn-lg">显示对话框</a>
					<script class="demo-script">
						;(function (){
							// 取消按钮的回调函数
							var func0 = function () {
								console.log('你点了取消');
							};
							// 确定按钮的回调函数
							var func1 = function () {
								console.log('你点了确定');
							};
							var opts = {
								// 必填项
								title: '提示',		// 对话框标题
								content: '你确定么？',// 对话框内容
								btnText: ['取消', '确定'], // 按钮文字
								btnHandle: [func0, func1], // 按钮点击后的回调函数

								// 可选项, 以下为默认值
								mask: true,     	// 是否显示遮罩
								animation: true,	// 是否开启动画
								tapHide: true,		// 打开对话框后，点击遮罩是否关闭对话框
								preventScroll: true,// 是否禁止滚动
							};
							// 测试
							var dialog = new JMU.Dialog();
							$('#dialog').on('tap', '.demo-show',function (){
								dialog.show(opts);
							});
						})();
					</script>
				</div>
			</section>
		</div>
	
	<div class="jmu-content jmu-active">
		<section id="action-sheet">
			<div class="demo-item">
				<p class="demo-desc">菜单</p>
				<div class="demo-block">
					<!--无 html-->
				</div>
				<a class="demo-show jmu-btn-lg">显示菜单</a>
				<script class="demo-script">
					$(function (){
						var func0 = function () {
							console.log('你点了选项1!');
						};
						var func1 = function () {
							console.log('你点了选项2!');
						};
						var opts = {
							mask: true,
							animation: true,
							tapHide: true,
							preventScroll: true,
							content: ['分享给QQ好友', '分享到QQ空间'],
							btnHandle: [func0, func1]
						};
						// 测试
						var actionSheet = new JMU.ActionSheet();
						$('#action-sheet').on('tap', '.demo-show', function (){
							actionSheet.show(opts);
						});
					})
				</script>
			</div>
		</section>
	</div>

		<div class="jmu-content jmu-active">
			<section id="action-share">
				<div class="demo-item">
					<p class="demo-desc">分享菜单</p>
					<div class="demo-block">
						<!--无 html-->
					</div>
					<a class="demo-show jmu-btn-lg">显示分享到菜单</a>
					<script class="demo-script">
						$(function (){
							var func1 = function(){
								console.log('你点了选项1');
							};
							var func2 = function(){
								console.log('你点了选项2');
							};
							var func3 = function(){
								console.log('你点了选项3');
							};
							var func4 = function(){
								console.log('你点了选项4');
							};
							var func5 = function(){
								console.log('你点了选项5');
							};
							var func6 = function(){
								console.log('你点了选项6');
							};
							var content = [
								{
									value: '<img src="../img/share-qq.png"><span>QQ好友</span>', //展示的值
									id: 'testId1',//给节点添加自定义id
									className: 'sheet-item',//添加自己的样式
									cmd: 'func1' //自定义事件名
								},
								{
									value: '<img src="../img/share-qz.png"><span>QQ空间</span>',
									id: 'testId2',
									className: 'sheet-item',
									cmd: 'func2'
								},
								{
									value: '<img src="../img/share-wx.png"><span>微信</span>',
									id: 'testId3',
									className: 'sheet-item',
									cmd: 'func3'
								},

								{
									value: '<img src="../img/share-qq.png"><span>好友/群</span>',
									id: 'testId4',
									className: 'sheet-item',
									cmd: 'func4'
								},
								{
									value: '<img src="../img/share-qz.png"><span>QQ空间</span>',
									id: 'testId5',
									className: 'sheet-item',
									cmd: 'func5'
								},
								{
									value: '<img src="../img/share-wx.png"><span>微信</span>',
									id: 'testId6',
									className: 'sheet-item',
									cmd: 'func6'
								}
							];

							var optsShare = {
								mask: true,
								animation: true,
								tapHide: true,
								preventScroll: true,
								content: content,
								func1: func1,
								func2: func2,
								func3: func3,
								func4: func4,
								func5: func5,
								func6: func6
							};
							// 测试
							var actionShare = new JMU.ActionShare();
							$('#action-share').on('tap', '.demo-show', function (){
								actionShare.show(optsShare);
							});
						})
					</script>
				</div>

			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="swipe-down-refresh">
				<div class="demo-item">
					<p class="demo-desc">下拉刷新</p>
					<div class="demo-block">
						<div class="demo-swipe-el">
							<div>请下拉</div>
						</div>
					</div>
					<style>
						.test-div {
							width: 100%;
							height: 0;
							opacity: 0;
							color: #fff;
							text-align: center;
						}
					</style>
					<script>
						var laiUtil = {};

						laiUtil.setRandomBgColor = function (selector) {
							$(selector).each(function () {
								var rgba = laiUtil.getRandomBgColor();
								$(this).css('background-color', rgba);
							})
						};
						laiUtil.getRandomBgColor = function () {
							var r = laiUtil.getRandomNumber(0,255);
							var g = laiUtil.getRandomNumber(0,255);
							var b = laiUtil.getRandomNumber(0,255);
							var a = laiUtil.getRandomNumber(50,100) / 100;
							return 'rgba(' + r + ',' + g + ',' + b + ',' + a +')';
						};
						laiUtil.getRandomNumber = function (min, max) {
							var range = max - min;
							var result = Math.floor(Math.random() * range) + min;
							return result;
						};
						laiUtil.appendTestDiv = function (num) {
							for (var i = 0; i < num; i++) {
								setTimeout(function () {
									var color = laiUtil.getRandomBgColor();
									var $div = $('<div>').css({'background-color': color, 'opacity': 0});
									$('.demo-swipe-el').prepend($div);
									$div.animate({
										opacity: 1,
										height: 100
									}, 500, 'ease-in-out');
								}, i * 100);
							}
						};
						laiUtil.appendTestDiv(2);
					</script>
					<script class="demo-script">
						;(function (){
							function refreshFunc (callback) {
								// 模拟异步拉取数据
								console.log('正在拉取数据');
								setTimeout(function () {
									console.log('完成拉取数据');
									// laiUtil.appendTestDiv 用于 demo: 插入两段 div
									laiUtil.appendTestDiv(2);
									// 执行更新操作
									callback();
								}, 3000);
							}

							// swipe down options
							var options = {
								el: '.demo-swipe-el', // 下拉元素， 若无指定则默认为 'body'
//								swipeDownDistance: 60, // 下拉激活刷新的距离
//								swipeDownTips: ['再用点力', '释放刷新', '正在刷新', '刷新成功'], // 下拉提示文案
								refreshFunc: refreshFunc
							};
							new JMU.SwipeDownRefresh(options);
						})();
					</script>
				</div>
			</section>
		</div>
	
		<div class="jmu-content jmu-active">
			<section id="carousel">
				<div class="demo-item">
					<p class="demo-desc">轮播图</p>
					<div class="demo-block">
						<div id="carousel-demo">
							<div class="jmu-carousel" style="width: 375px; height: 200px;">
								<ul class="jmu-carousel-inner">
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第0张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第1张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第2张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第3张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第4张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第5张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第6张"></li>
									<li class="jmu-carousel-item"><img data-holder="375x200" data-holder-text="第7张"></li>
								</ul>
							</div>
						</div>
					</div>
					<br>
					<button id="carousel-demo-to-1" class="jmu-btn">不使用动画到第1张</button>
					<button id="carousel-demo-to-6" class="jmu-btn">使用动画到第6张</button>
					<script class="demo-script">
						;(function (){
							// 占位图;
							$.holder();

							var el = '#carousel-demo .jmu-carousel';
							var opts = {
								// webkitTransitionDuration
								webkitTransitionDuration : 300,
								// 当前帧数
								current : 0,
								// 当前距离
								currentpos : 0,
								// 激活circle轮播方式，默认激活
								enableCircleLoop : true,
								// 激活自动轮, 默认激活, 自动轮播激活前提是激活了circle轮播方式
								enableAutoLoop : true,
								// 激活触点导航控件
								enableDots : true,
								// 自动轮换时长, 单位为 ms
								autoLoopDuration : 5000
							};
							var carousel = new $.Carousel(el, opts);
							$('#carousel-demo-to-6').on('tap', function (){
								carousel.to(6, false);// 滚动到第6张, 使用动画
							});
							$('#carousel-demo-to-1').on('tap', function (){
								carousel.to(1, true);// 滚动到第1张, 不使用动画
							});
						})();
					</script>
				</div>

			</section>
		</div>
	</div>
<script>
$(function () {
    var blankList = ['demo-all.html', 'demo-base-css.html', 'demo-ui-css.html', 'demo-ui-js.html'];
    var page = window.location.pathname.split('/').pop();
    if (blankList.indexOf(page) > -1) {
        $('.demo-desc').css({
            'text-align': 'center',
            'display': 'block',
            'color': '#ff6d00'
        });
        $('.demo-item').css({
            'margin': '30px auto'
        });
        $('.jmu-content.js-active').css({
            'margin-bottom': 50,
            'padding':10,
            'box-shadow': '0 0 4px #aaa'
        });
    } else {
        $('.jmu-content').removeClass('jmu-active');
        $('.jmu-content').eq(1).addClass('jmu-active');
        // $(window).on('hashchange, fn) 有问题
        window.onhashchange = function () {
            $('.jmu-content').removeClass('jmu-active');
            var id= window.location.hash;
            $(id).parent('.jmu-content').addClass('jmu-active');
        }
    }
});
</script>
</body>
</html>